import{j as f}from"./jsx-runtime-CexXSJP5.js";import{r as o}from"./index-BP8_t0zE.js";import{c as d}from"./classNames-DgDD4s-s.js";import{a as h,u as S,g as v,s as P}from"./scrollSave-_auc3EBr.js";import{u as x}from"./index-g03I8CFB.js";const T="_Page_tq39x_1",E="_trigger_tq39x_9",m={Page:T,trigger:E};function _({callback:r,wrapperRef:s,triggerRef:t}){const e=o.useRef(null);o.useEffect(()=>{const i=s.current,n=t.current;if(r){const a={root:i,rootMargin:"0px",threshold:1};e.current=new IntersectionObserver(([c])=>{c.isIntersecting&&r()},a),e.current.observe(n)}return()=>{e.current&&n&&e.current.unobserve(n)}},[r,t,s])}const N=(r,s)=>{const t=o.useRef(!1);return o.useCallback((...e)=>{t.current||(r(...e),t.current=!0,setTimeout(()=>{t.current=!1},s))},[r,s])},R=r=>{const{className:s,children:t,onScrollEnd:e,isSaveScroll:i=!0}=r,{pathname:n}=x(),a=h(),c=o.useRef(),u=o.useRef(),p=S(l=>v(l,n));_({triggerRef:u,wrapperRef:c,callback:e});const g=N(l=>{a(P.setScrollPosition({path:n,position:l.currentTarget.scrollTop}))},500);return o.useEffect(()=>{c.current.scrollTop=p},[p]),f.jsxs("section",{...i?{onScroll:g}:{},ref:c,className:d(m.Page,{},[s]),children:[t,e?f.jsx("div",{className:m.trigger,ref:u}):null]})};R.__docgenInfo={description:"",methods:[],displayName:"Page",props:{className:{required:!1,tsType:{name:"string"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""},onScrollEnd:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},isSaveScroll:{required:!1,tsType:{name:"boolean"},description:""}}};export{R as P};
