const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CommentForm-DgCmnfZR.js","./jsx-runtime-DR9Q75dM.js","./index-DRjF_FHU.js","./classNames-DgDD4s-s.js","./Input-BB71l9KN.js","./Input-CKiohvtz.css","./Button-C5g2HnJ_.js","./Button-DaSGojsy.css","./userSlice-CdonUkG-.js","./scrollSave-CNeLDUKN.js","./index-rX-Bn4lm.js","./addCommentFormSlice-CH0FsWet.js","./CommentForm-DM7_hZfH.css"])))=>i.map(i=>d[i]);
import{j as e}from"./jsx-runtime-DR9Q75dM.js";import{r as n}from"./index-DRjF_FHU.js";import{T as g,a as L}from"./Text-sKGt-uWf.js";import{C as v}from"./CommentList-Cx_KCjZV.js";import{t as C,D as N}from"./userSlice-CdonUkG-.js";import{f as _,g as T,a as E,b as y,c as I}from"./index-C6Ymil2s.js";import{b as k,u as m,a as B}from"./scrollSave-CNeLDUKN.js";import{_ as F}from"./iframe-7WP281eA.js";import{g as D,a as R,A as b}from"./ArticleDetails-ElScsN-j.js";import{g as H,R as f,A as W}from"./ArticleList-B507OmWi.js";import"./ArticleViewSelector-pROLgH_B.js";import{g as $}from"./getUserAuthData-Bm7Ac1PY.js";import{P as S}from"./Page-BFiOtqy_.js";import{c as w}from"./classNames-DgDD4s-s.js";import{B as u}from"./Button-C5g2HnJ_.js";import{u as h}from"./useTranslation-BUpB3eR0.js";import{a as z,f as U}from"./index-CZJRB5QZ.js";import"./CommentCard-CA8S6Bz4.js";import"./Avatar-Bxkdti11.js";import"./Skeleton-Betdy8Xd.js";import"./AppLink-CEsaRZ1G.js";import"./index-BB2jNUZ5.js";import"./index-rX-Bn4lm.js";import"../sb-preview/runtime.js";import"./Icon-AhLlVS1L.js";import"./article-CmWc1HkS.js";import"./Code-C87xehsd.js";import"./Card-DL3b9dGt.js";import"./Select-DUCTPjr8.js";import"./Tabs-Chc4d2Hk.js";import"./NotFoundPage-CfH_ovgT.js";const V=t=>{var a;return((a=t.articleDetailsPage)==null?void 0:a.comments.isLoading)??!1},q=n.lazy(()=>F(()=>import("./CommentForm-DgCmnfZR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),M=k("articleDetails/addCommentForArticle",async(t,a)=>{const{extra:s,rejectWithValue:o,getState:r,dispatch:d}=a,c=$(r()),i=D(r());if(!c||!t||!i)return o("no data");try{const p=await s.api.post("/comments",{articleId:i==null?void 0:i.id,userId:c==null?void 0:c.id,text:t});if(!p.data)throw new Error;return d(_(i.id)),p.data}catch{return o(C("Ошибка"))}}),O=t=>{var a,s;return((s=(a=t.articleDetailsPage)==null?void 0:a.recommendations)==null?void 0:s.isLoading)??!1},G="_ArticleDetailsPageHeader_u7lfc_1",J="_editBtn_u7lfc_6",A={ArticleDetailsPageHeader:G,editBtn:J},P=t=>{const{className:a}=t,{t:s}=h(""),o=z(),r=m(D),d=m(H),c=n.useCallback(()=>{o(f.articles)},[o]),i=n.useCallback(()=>{o(`${f.article_details}${r==null?void 0:r.id}/edit`)},[r==null?void 0:r.id,o]);return e.jsxs("div",{className:w(A.ArticleDetailsPageHeader,{},[a]),children:[e.jsx(u,{onClick:c,children:s("< Все статьи")}),d&&e.jsx(u,{className:A.editBtn,onClick:i,children:s("Редактировать")})]})};P.__docgenInfo={description:"",methods:[],displayName:"ArticleDetailsPageHeader",props:{className:{required:!1,tsType:{name:"string"},description:""}}};const K="_commentTitle_svvdr_1",Q="_commentForm_svvdr_5",X="_recommendWrap_svvdr_9",Y="_recommendList_svvdr_13",l={commentTitle:K,commentForm:Q,recommendWrap:X,recommendList:Y},Z={articleDetailsPage:I},x=()=>{const{id:t}=U(),{t:a}=h("article-details"),s=B(),o=m(T.selectAll),r=m(V),d=m(R),c=m(E.selectAll),i=m(O);n.useEffect(()=>{s(_(t)),s(y())},[s,t]);const p=n.useCallback(j=>{s(M(j))},[s]);return n.useEffect(()=>{console.log(o)},[o]),t?e.jsx(N,{reducers:Z,removeAfterUnmount:!0,children:e.jsxs(S,{className:l.ArticleDetailsPage,children:[e.jsx(P,{}),e.jsx(b,{id:t}),e.jsxs("div",{className:l.recommendWrap,children:[e.jsx(g,{size:L.L,title:"Рекомендуем"}),e.jsx(W,{className:l.recommendList,articles:c,isLoading:i,target:"_blank"})]}),!d&&e.jsxs(e.Fragment,{children:[e.jsx(g,{className:l.commentTitle,title:"Комментарии"}),e.jsx(q,{className:l.commentForm,onSendComment:p}),e.jsx(v,{isLoading:r,comments:o})]})]})}):e.jsx("div",{className:l.ArticleDetailsPage,children:a("Статья не найдена")})},ke=n.memo(x);x.__docgenInfo={description:"",methods:[],displayName:"ArticleDetailsPage"};export{ke as default};
