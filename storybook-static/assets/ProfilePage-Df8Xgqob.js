import{j as r}from"./jsx-runtime-DR9Q75dM.js";import{r as a}from"./index-DRjF_FHU.js";import{D as U}from"./userSlice-CdonUkG-.js";import{g,p as s,u as L,V as n,f as D,a as V}from"./profileSlice-BZf1TSNQ.js";import{P as v}from"./ProfileCard-BkOs2ppH.js";import{a as h,u as i}from"./scrollSave-CNeLDUKN.js";import{T as P,b as H}from"./Text-v1Mx-HOT.js";import{B as C,a as E}from"./Button-C5g2HnJ_.js";import{g as F}from"./getUserAuthData-Bm7Ac1PY.js";import{H as R}from"./HStack-CaG30RU_.js";import{u as T}from"./useTranslation-BUpB3eR0.js";import{P as M}from"./Page-CWv5Pw3X.js";import{f as B}from"./index-CZJRB5QZ.js";import"./classNames-DgDD4s-s.js";import"./Input-BB71l9KN.js";import"./Avatar-Bxkdti11.js";import"./CurrencySelect-D2cod156.js";import"./Select-DUCTPjr8.js";import"./CountrySelect-BTp0GpiY.js";import"./Skeleton-Betdy8Xd.js";import"./index-rX-Bn4lm.js";import"./Flex-C5DsYTI8.js";const w=o=>{var e;return(e=o.profile)==null?void 0:e.error},G=o=>{var e;return(e=o.profile)==null?void 0:e.isLoading},_=o=>{var e;return(e=o.profile)==null?void 0:e.readonly},Y=o=>{var e;return(e=o.profile)==null?void 0:e.validateError},x=()=>{const{t:o}=T("profile"),e=h(),c=i(_),m=i(F),f=i(g),d=(m==null?void 0:m.id)===(f==null?void 0:f.id),p=a.useCallback(()=>{e(s.setReadonly(!1))},[e]),l=a.useCallback(()=>{e(s.cancelEdit())},[e]),u=a.useCallback(()=>{e(L())},[e]);return r.jsxs(R,{justify:"between",children:[r.jsx(P,{title:o("Профиль")}),d&&r.jsx(r.Fragment,{children:c?r.jsx(C,{onClick:p,theme:E.OUTLINE,children:o("Редактировать")}):r.jsxs(R,{gap:"16",children:[r.jsx(C,{onClick:l,theme:E.OUTLINE_RED,children:o("Отменить")}),r.jsx(C,{theme:E.OUTLINE,onClick:u,children:o("Сохранить")})]})})]})};x.__docgenInfo={description:"",methods:[],displayName:"ProfilePageHeader"};const q={profile:V},z=()=>{const{t:o}=T("profile"),e=h(),{id:c}=B(),m=i(g),f=i(G),d=i(w),p=i(_),l=i(Y),u=a.useCallback(t=>{e(s.updateProfile({firstname:t||""}))},[e]),A=a.useCallback(t=>{e(s.updateProfile({lastname:t||""}))},[e]),N=a.useCallback(t=>{e(s.updateProfile({age:Number(t||0)}))},[e]),j=a.useCallback(t=>{e(s.updateProfile({country:t}))},[e]),k=a.useCallback(t=>{e(s.updateProfile({currency:t}))},[e]),y=a.useCallback(t=>{e(s.updateProfile({city:t}))},[e]),b=a.useCallback(t=>{e(s.updateProfile({avatar:t||""}))},[e]),I=a.useCallback(t=>{e(s.updateProfile({username:t||""}))},[e]),O=()=>{if(l!=null&&l.length)return l.map(t=>r.jsx(P,{theme:H.ERROR,text:S[t]},t))},S={[n.INCORRECT_USER_FIRSTNAME]:o("Неверно указано имя"),[n.INCORRECT_USER_LASTNAME]:o("Неверно указана фамилия"),[n.INCORRECT_USER_USERNAME]:o("Неверно указан никнейм"),[n.INCORRECT_CHARACTERS]:o("Имя и фамилия не могут содержить числа"),[n.INCORRECT_USER_AGE]:o("Неверно указан возраст"),[n.INCORRECT_USER_COUNTRY]:o("Неверно указана страна"),[n.NO_DATA]:o("Данные отсутствуют"),[n.SERVER_ERROR]:o("Ошибка сервера"),[n.INCORRECT_USER_AVATAR]:o("Неверный путь изображения")};return a.useEffect(()=>{c&&e(D(c))},[e,c]),r.jsx(U,{reducers:q,removeAfterUnmount:!0,children:r.jsxs(M,{children:[r.jsx(x,{}),O(),r.jsx(v,{data:m,isLoading:f,error:d,readonly:p,onChangeFirstname:u,onChangeLastname:A,onChangeAge:N,onChangeCountry:j,onChangeCurrency:k,onChangeCity:y,onChangeAvatar:b,onChangeUsername:I})]})})};z.__docgenInfo={description:"",methods:[],displayName:"ProfilePage"};export{z as ProfilePage,z as default};
