import{j as s}from"./jsx-runtime-CexXSJP5.js";import{r as t}from"./index-BP8_t0zE.js";import{D as S}from"./DynamicModuleLoader-D45YiiHY.js";import{b as E,p as r,c as U,g as j,V as n,f as B,d as L}from"./useAppDispatch-DV8wwSBw.js";import{P as v}from"./ProfileCard-CMX95jzI.js";import{u as d}from"./i18next-CEY2YAwM.js";import{c as D}from"./classNames-DgDD4s-s.js";import{T as P,a as H}from"./Text-B2gU8dYJ.js";import{B as C,a as R}from"./Button-Dn18IoVx.js";import{u as g}from"./useTranslation-B2QVmqVC.js";import"./Input-SBXS8SFk.js";import"./Loader-Ba6IOZ8c.js";import"./Avatar-DgOqVGEJ.js";import"./CurrencySelect-BXS0wK0v.js";import"./Select-DReADGzP.js";import"./CountrySelect-D6tEF-9G.js";import"./index-DJkmxc1E.js";const V=a=>{var e;return(e=a.profile)==null?void 0:e.error},M=a=>{var e;return(e=a.profile)==null?void 0:e.isLoading},_=a=>{var e;return(e=a.profile)==null?void 0:e.readonly},F=a=>{var e;return(e=a.profile)==null?void 0:e.validateError},q="_ProfilePageHeader_1cumy_1",G="_editBtn_1cumy_7",W="_cancelBtn_1cumy_11",m={ProfilePageHeader:q,editBtn:G,cancelBtn:W},h=a=>{const{className:e}=a,{t:c}=g("profile"),i=E(),f=d(_),p=t.useCallback(()=>{i(r.setReadonly(!1))},[i]),l=t.useCallback(()=>{i(r.cancelEdit())},[i]),u=t.useCallback(()=>{i(U())},[i]);return s.jsxs("div",{className:D(m.ProfilePageHeader,{},[e]),children:[s.jsx(P,{title:c("Профиль")}),f?s.jsx(C,{onClick:p,theme:R.OUTLINE,className:m.editBtn,children:c("Редактировать")}):s.jsxs("div",{className:m.editModeWrap,children:[s.jsx(C,{onClick:l,theme:R.OUTLINE_RED,className:m.cancelBtn,children:c("Отменить")}),s.jsx(C,{theme:R.OUTLINE,className:m.editBtn,onClick:u,children:c("Сохранить")})]})]})};h.__docgenInfo={description:"",methods:[],displayName:"ProfilePageHeader",props:{className:{required:!1,tsType:{name:"string"},description:""}}};const Y={profile:L},$=()=>{const{t:a}=g("profile"),e=E(),c=d(j),i=d(M),f=d(V),p=d(_),l=d(F),u=t.useCallback(o=>{e(r.updateProfile({firstname:o||""}))},[e]),N=t.useCallback(o=>{e(r.updateProfile({lastname:o||""}))},[e]),T=t.useCallback(o=>{e(r.updateProfile({age:Number(o||0)}))},[e]),y=t.useCallback(o=>{e(r.updateProfile({country:o}))},[e]),x=t.useCallback(o=>{e(r.updateProfile({currency:o}))},[e]),A=t.useCallback(o=>{e(r.updateProfile({city:o}))},[e]),k=t.useCallback(o=>{e(r.updateProfile({avatar:o||""}))},[e]),I=t.useCallback(o=>{e(r.updateProfile({username:o||""}))},[e]),O=()=>{if(l!=null&&l.length)return l.map(o=>s.jsx(P,{theme:H.ERROR,text:b[o]},o))},b={[n.INCORRECT_USER_FIRSTNAME]:a("Неверно указано имя"),[n.INCORRECT_USER_LASTNAME]:a("Неверно указана фамилия"),[n.INCORRECT_USER_USERNAME]:a("Неверно указан никнейм"),[n.INCORRECT_CHARACTERS]:a("Имя и фамилия не могут содержить числа"),[n.INCORRECT_USER_AGE]:a("Неверно указан возраст"),[n.INCORRECT_USER_COUNTRY]:a("Неверно указана страна"),[n.NO_DATA]:a("Данные отсутствуют"),[n.SERVER_ERROR]:a("Ошибка сервера"),[n.INCORRECT_USER_AVATAR]:a("Неверный путь изображения")};return t.useEffect(()=>{e(B())},[e]),s.jsxs(S,{reducers:Y,removeAfterUnmount:!0,children:[s.jsx(h,{}),O(),s.jsx(v,{data:c,isLoading:i,error:f,readonly:p,onChangeFirstname:u,onChangeLastname:N,onChangeAge:T,onChangeCountry:y,onChangeCurrency:x,onChangeCity:A,onChangeAvatar:k,onChangeUsername:I})]})};$.__docgenInfo={description:"",methods:[],displayName:"ProfilePage",props:{className:{required:!1,tsType:{name:"string"},description:""}}};export{$ as default};
