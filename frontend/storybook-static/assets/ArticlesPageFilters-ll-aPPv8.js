import{j as n}from"./jsx-runtime-CexXSJP5.js";import{r as p}from"./index-BP8_t0zE.js";import{c as P}from"./classNames-DgDD4s-s.js";import"./ArticleDetails-DZWEa8i9.js";import"./ArticleList-BEfs4AJF.js";import{A as u}from"./ArticleViewSelector-BoUTdFEi.js";import{b as f,d as S,c as h,f as w,e as y}from"./scrollSave-CvpIp14x.js";import{b as g,c as L}from"./TextBlock-4LNlnsRv.js";import{t as _,A as m}from"./localStorage-CnWtazwr.js";import{S as M}from"./Select-BZBKgAeq.js";const q=t=>{var e;return((e=t.articlesPage)==null?void 0:e.isLoading)||!1},G=t=>{var e;return(e=t.articlesPage)==null?void 0:e.error},v=t=>{var e;return((e=t.articlesPage)==null?void 0:e.view)||g.SMALL},H=t=>{var e;return((e=t.articlesPage)==null?void 0:e.page)||1},E=t=>{var e;return((e=t.articlesPage)==null?void 0:e.limit)||9},K=t=>{var e;return(e=t.articlesPage)==null?void 0:e.hasMore},Y=t=>{var e;return(e=t.articlesPage)==null?void 0:e._inited},d=f("articlesPage/fetchArticles",async(t,e)=>{const{extra:a,rejectWithValue:r,getState:i}=e,{page:c=1}=t,o=E(i());try{const l=await a.api.get("/articles",{params:{_limit:o,_page:c}});if(!l.data)throw new Error;return l.data}catch{return r(_("Ошибка"))}}),s=S({selectId:t=>t.id}),z=s.getSelectors(t=>t.articlesPage||s.getInitialState()),A=h({name:"articlesPage",initialState:s.getInitialState({isLoading:!1,error:void 0,ids:[],entities:{},view:g.SMALL,_inited:!1,hasMore:!0,page:1,limit:9,order:"asc",search:"",sort:L.CREATED}),reducers:{setViewMode:(t,e)=>{t.view=e.payload,localStorage.setItem(m,e.payload)},initState:t=>{const e=localStorage.getItem(m);t.view=e,t.limit=e===g.SMALL?9:4,t._inited=!0},setPage:(t,e)=>{t.page=e.payload},setOrder:(t,e)=>{t.order=e.payload},setSearch:(t,e)=>{t.search=e.payload},setSort:(t,e)=>{t.sort=e.payload}},extraReducers(t){t.addCase(d.pending,e=>{e.error=void 0,e.isLoading=!0}).addCase(d.fulfilled,(e,a)=>{e.isLoading=!1,s.addMany(e,a.payload),e.hasMore=a.payload.length>0}).addCase(d.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload})}}),{reducer:B}=A,{actions:I}=A,x="_test_81enk_1",C={test:x},V=t=>{const{className:e}=t,a=w(),r=y(v),i=p.useMemo(()=>[{content:"возрастанию",value:"asc"},{content:"убыванию",value:"desc"}],[]),c=p.useCallback(o=>{a(I.setViewMode(o))},[a]);return n.jsxs("div",{className:P(C.ArticlesPageFilters,{},[e]),children:[n.jsx(M,{label:"Сортировать по",options:i}),n.jsx(u,{view:r,onViewClick:c})]})};V.__docgenInfo={description:"",methods:[],displayName:"ArticlesPageFilters",props:{className:{required:!1,tsType:{name:"string"},description:""}}};export{V as A,H as a,q as b,I as c,Y as d,v as e,d as f,K as g,G as h,z as i,B as j};
