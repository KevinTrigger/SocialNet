import{j as s}from"./jsx-runtime-CexXSJP5.js";import{r as t}from"./index-BP8_t0zE.js";import{D as S}from"./DynamicModuleLoader-zWzWfUIV.js";import{p as r,u as U,g as j,V as n,f as B,a as L}from"./profileSlice-CHcgkUm9.js";import{P as v}from"./ProfileCard-HYdR2dDN.js";import{b as E}from"./useAppDispatch-CHJEm9Vz.js";import{b as d}from"./userSlice-BUja-80x.js";import{c as D}from"./classNames-DgDD4s-s.js";import{T as P,a as H}from"./Text-7oj-NtWT.js";import{B as C,a as R}from"./Button-CULVALhb.js";import{u as g}from"./useTranslation-B2QVmqVC.js";import"./Input-SBXS8SFk.js";import"./Avatar-DgOqVGEJ.js";import"./CurrencySelect-CKpOPOOK.js";import"./Select-DReADGzP.js";import"./CountrySelect-CY_IAIwX.js";import"./Skeleton-CD873yLi.js";import"./index-DJkmxc1E.js";const V=a=>{var e;return(e=a.profile)==null?void 0:e.error},M=a=>{var e;return(e=a.profile)==null?void 0:e.isLoading},_=a=>{var e;return(e=a.profile)==null?void 0:e.readonly},F=a=>{var e;return(e=a.profile)==null?void 0:e.validateError},q="_ProfilePageHeader_n66ru_1",G="_editBtn_n66ru_6",W="_cancelBtn_n66ru_10",m={ProfilePageHeader:q,editBtn:G,cancelBtn:W},h=a=>{const{className:e}=a,{t:l}=g("profile"),i=E(),f=d(_),p=t.useCallback(()=>{i(r.setReadonly(!1))},[i]),c=t.useCallback(()=>{i(r.cancelEdit())},[i]),u=t.useCallback(()=>{i(U())},[i]);return s.jsxs("div",{className:D(m.ProfilePageHeader,{},[e]),children:[s.jsx(P,{title:l("Профиль")}),f?s.jsx(C,{onClick:p,theme:R.OUTLINE,className:m.editBtn,children:l("Редактировать")}):s.jsxs("div",{className:m.editModeWrap,children:[s.jsx(C,{onClick:c,theme:R.OUTLINE_RED,className:m.cancelBtn,children:l("Отменить")}),s.jsx(C,{theme:R.OUTLINE,className:m.editBtn,onClick:u,children:l("Сохранить")})]})]})};h.__docgenInfo={description:"",methods:[],displayName:"ProfilePageHeader",props:{className:{required:!1,tsType:{name:"string"},description:""}}};const Y={profile:L},$=()=>{const{t:a}=g("profile"),e=E(),l=d(j),i=d(M),f=d(V),p=d(_),c=d(F),u=t.useCallback(o=>{e(r.updateProfile({firstname:o||""}))},[e]),N=t.useCallback(o=>{e(r.updateProfile({lastname:o||""}))},[e]),T=t.useCallback(o=>{e(r.updateProfile({age:Number(o||0)}))},[e]),x=t.useCallback(o=>{e(r.updateProfile({country:o}))},[e]),A=t.useCallback(o=>{e(r.updateProfile({currency:o}))},[e]),y=t.useCallback(o=>{e(r.updateProfile({city:o}))},[e]),b=t.useCallback(o=>{e(r.updateProfile({avatar:o||""}))},[e]),k=t.useCallback(o=>{e(r.updateProfile({username:o||""}))},[e]),I=()=>{if(c!=null&&c.length)return c.map(o=>s.jsx(P,{theme:H.ERROR,text:O[o]},o))},O={[n.INCORRECT_USER_FIRSTNAME]:a("Неверно указано имя"),[n.INCORRECT_USER_LASTNAME]:a("Неверно указана фамилия"),[n.INCORRECT_USER_USERNAME]:a("Неверно указан никнейм"),[n.INCORRECT_CHARACTERS]:a("Имя и фамилия не могут содержить числа"),[n.INCORRECT_USER_AGE]:a("Неверно указан возраст"),[n.INCORRECT_USER_COUNTRY]:a("Неверно указана страна"),[n.NO_DATA]:a("Данные отсутствуют"),[n.SERVER_ERROR]:a("Ошибка сервера"),[n.INCORRECT_USER_AVATAR]:a("Неверный путь изображения")};return t.useEffect(()=>{e(B())},[e]),s.jsxs(S,{reducers:Y,removeAfterUnmount:!0,children:[s.jsx(h,{}),I(),s.jsx(v,{data:l,isLoading:i,error:f,readonly:p,onChangeFirstname:u,onChangeLastname:N,onChangeAge:T,onChangeCountry:x,onChangeCurrency:A,onChangeCity:y,onChangeAvatar:b,onChangeUsername:k})]})};$.__docgenInfo={description:"",methods:[],displayName:"ProfilePage",props:{className:{required:!1,tsType:{name:"string"},description:""}}};export{$ as ProfilePage,$ as default};
