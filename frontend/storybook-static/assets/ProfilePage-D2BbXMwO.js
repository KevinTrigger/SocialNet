import{j as t}from"./jsx-runtime-Cw0GR0a5.js";import{r as o}from"./index-CTjT7uj6.js";import{D as S}from"./DynamicModuleLoader-iRIkfpiq.js";import{g as _,p as s,u as B,V as n,f as L,a as v}from"./profileSlice-DBOS1-d0.js";import{P as H}from"./ProfileCard-DxAWe1sF.js";import{b as h}from"./useAppDispatch-Bt7wXbJ2.js";import{d as l}from"./localStorage-BvkLEUEt.js";import{c as D}from"./classNames-DgDD4s-s.js";import{T as N,b as V}from"./Text-a7QVxXHR.js";import{B as P,a as g}from"./Button-FfmSwvyD.js";import"./userSlice-D9ZQQa6-.js";import{g as M}from"./getUserAuthData-Bm7Ac1PY.js";import{u as T}from"./useTranslation-DegO0IwE.js";import{P as W}from"./Page-DOlsuWKT.js";import{a as F}from"./index-CVbFUeQw.js";import"./Input-BnN8jSt7.js";import"./Avatar-BpDMNdIA.js";import"./CurrencySelect-D3Go52tV.js";import"./Select-nkddY8PU.js";import"./CountrySelect-DSDE-6B2.js";import"./Skeleton-C9-T3umZ.js";import"./index-vZN_Bsf0.js";const q=r=>{var e;return(e=r.profile)==null?void 0:e.error},G=r=>{var e;return(e=r.profile)==null?void 0:e.isLoading},x=r=>{var e;return(e=r.profile)==null?void 0:e.readonly},Y=r=>{var e;return(e=r.profile)==null?void 0:e.validateError},$="_ProfilePageHeader_xr9nr_1",w="_editBtn_xr9nr_6",z="_cancelBtn_xr9nr_10",J="_btnsWrapper_xr9nr_14",m={ProfilePageHeader:$,editBtn:w,cancelBtn:z,btnsWrapper:J},b=r=>{const{className:e}=r,{t:i}=T("profile"),c=h(),u=l(x),p=l(M),f=l(_),d=(p==null?void 0:p.id)===(f==null?void 0:f.id),C=o.useCallback(()=>{c(s.setReadonly(!1))},[c]),E=o.useCallback(()=>{c(s.cancelEdit())},[c]),R=o.useCallback(()=>{c(B())},[c]);return t.jsxs("header",{className:D(m.ProfilePageHeader,{},[e]),children:[t.jsx(N,{title:i("Профиль")}),d&&t.jsx("div",{className:m.btnsWrapper,children:u?t.jsx(P,{onClick:C,theme:g.OUTLINE,className:m.editBtn,children:i("Редактировать")}):t.jsxs("div",{className:m.editModeWrap,children:[t.jsx(P,{onClick:E,theme:g.OUTLINE_RED,className:m.cancelBtn,children:i("Отменить")}),t.jsx(P,{theme:g.OUTLINE,className:m.editBtn,onClick:R,children:i("Сохранить")})]})})]})};b.__docgenInfo={description:"",methods:[],displayName:"ProfilePageHeader",props:{className:{required:!1,tsType:{name:"string"},description:""}}};const K={profile:v},Q=()=>{const{t:r}=T("profile"),e=h(),{id:i}=F(),c=l(_),u=l(G),p=l(q),f=l(x),d=l(Y),C=o.useCallback(a=>{e(s.updateProfile({firstname:a||""}))},[e]),E=o.useCallback(a=>{e(s.updateProfile({lastname:a||""}))},[e]),R=o.useCallback(a=>{e(s.updateProfile({age:Number(a||0)}))},[e]),A=o.useCallback(a=>{e(s.updateProfile({country:a}))},[e]),y=o.useCallback(a=>{e(s.updateProfile({currency:a}))},[e]),j=o.useCallback(a=>{e(s.updateProfile({city:a}))},[e]),k=o.useCallback(a=>{e(s.updateProfile({avatar:a||""}))},[e]),I=o.useCallback(a=>{e(s.updateProfile({username:a||""}))},[e]),O=()=>{if(d!=null&&d.length)return d.map(a=>t.jsx(N,{theme:V.ERROR,text:U[a]},a))},U={[n.INCORRECT_USER_FIRSTNAME]:r("Неверно указано имя"),[n.INCORRECT_USER_LASTNAME]:r("Неверно указана фамилия"),[n.INCORRECT_USER_USERNAME]:r("Неверно указан никнейм"),[n.INCORRECT_CHARACTERS]:r("Имя и фамилия не могут содержить числа"),[n.INCORRECT_USER_AGE]:r("Неверно указан возраст"),[n.INCORRECT_USER_COUNTRY]:r("Неверно указана страна"),[n.NO_DATA]:r("Данные отсутствуют"),[n.SERVER_ERROR]:r("Ошибка сервера"),[n.INCORRECT_USER_AVATAR]:r("Неверный путь изображения")};return o.useEffect(()=>{i&&e(L(i))},[e,i]),t.jsx(S,{reducers:K,removeAfterUnmount:!0,children:t.jsxs(W,{children:[t.jsx(b,{}),O(),t.jsx(H,{data:c,isLoading:u,error:p,readonly:f,onChangeFirstname:C,onChangeLastname:E,onChangeAge:R,onChangeCountry:A,onChangeCurrency:y,onChangeCity:j,onChangeAvatar:k,onChangeUsername:I})]})})};Q.__docgenInfo={description:"",methods:[],displayName:"ProfilePage",props:{className:{required:!1,tsType:{name:"string"},description:""}}};export{Q as ProfilePage,Q as default};
