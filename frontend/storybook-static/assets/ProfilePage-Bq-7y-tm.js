import{j as o}from"./jsx-runtime-Cw0GR0a5.js";import{r as t}from"./index-CTjT7uj6.js";import{D as S}from"./DynamicModuleLoader-DhPMMMm-.js";import{g as _,p as s,u as B,V as n,f as L,a as v}from"./profileSlice-B1_oBFzg.js";import{P as H}from"./ProfileCard-DxAWe1sF.js";import{b as h}from"./useAppDispatch-D8llxUJe.js";import{d as l}from"./i18next-Byb45X2d.js";import{c as D}from"./classNames-DgDD4s-s.js";import{T as N,b as V}from"./Text-a7QVxXHR.js";import{B as g,a as P}from"./Button-FfmSwvyD.js";import"./userSlice-BdF1H275.js";import{g as M}from"./getUserAuthData-Bm7Ac1PY.js";import{u as T}from"./useTranslation-DegO0IwE.js";import{a as W}from"./index-CVbFUeQw.js";import"./Input-BnN8jSt7.js";import"./Avatar-BpDMNdIA.js";import"./CurrencySelect-D3Go52tV.js";import"./Select-nkddY8PU.js";import"./CountrySelect-DSDE-6B2.js";import"./Skeleton-C9-T3umZ.js";import"./index-vZN_Bsf0.js";const F=r=>{var e;return(e=r.profile)==null?void 0:e.error},q=r=>{var e;return(e=r.profile)==null?void 0:e.isLoading},x=r=>{var e;return(e=r.profile)==null?void 0:e.readonly},G=r=>{var e;return(e=r.profile)==null?void 0:e.validateError},Y="_ProfilePageHeader_xr9nr_1",$="_editBtn_xr9nr_6",w="_cancelBtn_xr9nr_10",z="_btnsWrapper_xr9nr_14",m={ProfilePageHeader:Y,editBtn:$,cancelBtn:w,btnsWrapper:z},b=r=>{const{className:e}=r,{t:i}=T("profile"),c=h(),u=l(x),p=l(M),f=l(_),d=(p==null?void 0:p.id)===(f==null?void 0:f.id),C=t.useCallback(()=>{c(s.setReadonly(!1))},[c]),E=t.useCallback(()=>{c(s.cancelEdit())},[c]),R=t.useCallback(()=>{c(B())},[c]);return o.jsxs("div",{className:D(m.ProfilePageHeader,{},[e]),children:[o.jsx(N,{title:i("Профиль")}),d&&o.jsx("div",{className:m.btnsWrapper,children:u?o.jsx(g,{onClick:C,theme:P.OUTLINE,className:m.editBtn,children:i("Редактировать")}):o.jsxs("div",{className:m.editModeWrap,children:[o.jsx(g,{onClick:E,theme:P.OUTLINE_RED,className:m.cancelBtn,children:i("Отменить")}),o.jsx(g,{theme:P.OUTLINE,className:m.editBtn,onClick:R,children:i("Сохранить")})]})})]})};b.__docgenInfo={description:"",methods:[],displayName:"ProfilePageHeader",props:{className:{required:!1,tsType:{name:"string"},description:""}}};const J={profile:v},K=()=>{const{t:r}=T("profile"),e=h(),{id:i}=W(),c=l(_),u=l(q),p=l(F),f=l(x),d=l(G),C=t.useCallback(a=>{e(s.updateProfile({firstname:a||""}))},[e]),E=t.useCallback(a=>{e(s.updateProfile({lastname:a||""}))},[e]),R=t.useCallback(a=>{e(s.updateProfile({age:Number(a||0)}))},[e]),A=t.useCallback(a=>{e(s.updateProfile({country:a}))},[e]),y=t.useCallback(a=>{e(s.updateProfile({currency:a}))},[e]),k=t.useCallback(a=>{e(s.updateProfile({city:a}))},[e]),I=t.useCallback(a=>{e(s.updateProfile({avatar:a||""}))},[e]),O=t.useCallback(a=>{e(s.updateProfile({username:a||""}))},[e]),U=()=>{if(d!=null&&d.length)return d.map(a=>o.jsx(N,{theme:V.ERROR,text:j[a]},a))},j={[n.INCORRECT_USER_FIRSTNAME]:r("Неверно указано имя"),[n.INCORRECT_USER_LASTNAME]:r("Неверно указана фамилия"),[n.INCORRECT_USER_USERNAME]:r("Неверно указан никнейм"),[n.INCORRECT_CHARACTERS]:r("Имя и фамилия не могут содержить числа"),[n.INCORRECT_USER_AGE]:r("Неверно указан возраст"),[n.INCORRECT_USER_COUNTRY]:r("Неверно указана страна"),[n.NO_DATA]:r("Данные отсутствуют"),[n.SERVER_ERROR]:r("Ошибка сервера"),[n.INCORRECT_USER_AVATAR]:r("Неверный путь изображения")};return t.useEffect(()=>{i&&e(L(i))},[e,i]),o.jsxs(S,{reducers:J,removeAfterUnmount:!0,children:[o.jsx(b,{}),U(),o.jsx(H,{data:c,isLoading:u,error:p,readonly:f,onChangeFirstname:C,onChangeLastname:E,onChangeAge:R,onChangeCountry:A,onChangeCurrency:y,onChangeCity:k,onChangeAvatar:I,onChangeUsername:O})]})};K.__docgenInfo={description:"",methods:[],displayName:"ProfilePage",props:{className:{required:!1,tsType:{name:"string"},description:""}}};export{K as ProfilePage,K as default};
