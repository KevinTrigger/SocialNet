const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CommentForm-Cft5Cj28.js","./jsx-runtime-CexXSJP5.js","./index-BP8_t0zE.js","./classNames-DgDD4s-s.js","./Input-SBXS8SFk.js","./Input-CxcEy6wc.css","./Button-CULVALhb.js","./Button-NCujQp3l.css","./DynamicModuleLoader-BE7H7TF8.js","./userSlice-BUja-80x.js","./index-DJkmxc1E.js","./useAppDispatch-CHJEm9Vz.js","./getUserAuthData-Bm7Ac1PY.js","./ArticleDetails-BiOHjb_4.js","./articleDetailsSlice-CiyBvNif.js","./Text-7oj-NtWT.js","./Text-B-ip9wQX.css","./Skeleton-CD873yLi.js","./Skeleton-BIMKT0dE.css","./Avatar-DgOqVGEJ.js","./Avatar-DNB3mwwM.css","./Code-ClL86nT1.js","./Code-DvsrlEN0.css","./useTranslation-B2QVmqVC.js","./ArticleDetails--smT3yYg.css","./CommentForm-BTdIF2D1.css"])))=>i.map(i=>d[i]);
import{j as s}from"./jsx-runtime-CexXSJP5.js";import{c as i}from"./classNames-DgDD4s-s.js";import{r as h}from"./index-BP8_t0zE.js";import{b as N}from"./ArticleDetails-BiOHjb_4.js";import{T as l,b as y}from"./Text-7oj-NtWT.js";import{A as T,a as L}from"./Avatar-DgOqVGEJ.js";import{S as p}from"./Skeleton-CD873yLi.js";import{A as D}from"./AppLink-CQXvLTCP.js";import{R as v}from"./routeConfig-BMqZdfXG.js";import{D as S}from"./DynamicModuleLoader-BE7H7TF8.js";import{c as k,t as C,e as I,a as P,b as x}from"./userSlice-BUja-80x.js";import{b}from"./useAppDispatch-CHJEm9Vz.js";import{_ as q}from"./iframe-BsTwoO7P.js";import{f as w}from"./index-BhItUGrV.js";import{u as B}from"./useTranslation-B2QVmqVC.js";import"./articleDetailsSlice-CiyBvNif.js";import"./Code-ClL86nT1.js";import"./Button-CULVALhb.js";import"./index-C_MfmDJz.js";import"./index-DJkmxc1E.js";import"./NotFoundPage-f7_sTChr.js";import"../sb-preview/runtime.js";const E="_commentTitle_h09ma_1",R="_commentForm_h09ma_5",n={commentTitle:E,commentForm:R},z="_comment_1ejun_1",u={comment:z},F="_CommentCard_16shp_1",$="_authorBlock_16shp_9",U="_commentText_16shp_15",V="_skeletonCommentCard_16shp_19",m={CommentCard:F,authorBlock:$,commentText:U,skeletonCommentCard:V},f=a=>{const{className:t,comment:e,isLoading:r}=a;return r?s.jsxs("div",{className:i(m.CommentCard,{},[t]),children:[s.jsxs("div",{className:m.authorBlock,children:[e.user.avatar&&s.jsx(p,{width:60,height:60,border:"50%"}),s.jsx(p,{className:m.commentUsername,width:150,height:20})]}),s.jsx(p,{className:m.commentText,width:"100%",height:50})]}):s.jsxs("div",{className:i(m.CommentCard,{},[t]),children:[s.jsxs(D,{className:m.authorBlock,to:`${v.profile+e.user.id}`,children:[e.user.avatar&&s.jsx(T,{src:e.user.avatar,rounded:!0,size:L.S}),s.jsx(l,{className:m.commentUsername,text:e.user.username,size:y.L})]}),s.jsx(l,{className:m.commentText,text:e.text})]})};f.__docgenInfo={description:"",methods:[],displayName:"CommentCard",props:{className:{required:!1,tsType:{name:"string"},description:""},comment:{required:!0,tsType:{name:"Comment"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""}}};const _=a=>{const{className:t,comments:e,isLoading:r}=a;return console.log(e," comments"),r?e==null?void 0:e.map(o=>s.jsx(f,{isLoading:r,className:u.comment,comment:o},o.id)):s.jsx("div",{className:i(u.CommentList,{},[t]),children:e!=null&&e.length?e==null?void 0:e.map(o=>s.jsx(f,{isLoading:r,className:u.comment,comment:o},o.id)):s.jsx(l,{text:"Комментарии отсутствуют"})})};_.__docgenInfo={description:"",methods:[],displayName:"CommentList",props:{className:{required:!1,tsType:{name:"string"},description:""},comments:{required:!1,tsType:{name:"Array",elements:[{name:"Comment"}],raw:"Comment[]"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""}}};const c=k("articleDetails/fetchCommentsByArticleId",async(a,t)=>{const{extra:e,rejectWithValue:r}=t;if(!a)return r(C("Ошибка"));try{const o=await e.api.get("/comments",{params:{articleId:a,_expand:"user"}});if(!o.data)throw new Error;return o.data}catch{return r(C("Ошибка"))}}),d=I({selectId:a=>a.id}),M=d.getSelectors(a=>a.articleDetailsComments||d.getInitialState()),O=P({name:"articleDetailsCommentsSlice",initialState:d.getInitialState({isLoading:!1,error:void 0,ids:[],entities:{}}),reducers:{},extraReducers:a=>a.addCase(c.pending,t=>{t.error=void 0,t.isLoading=!0}).addCase(c.fulfilled,(t,e)=>{t.isLoading=!1,d.setAll(t,e.payload)}).addCase(c.rejected,(t,e)=>{t.isLoading=!1,t.error=e.payload})}),{reducer:W}=O,G=a=>{var t;return(t=a.articleDetailsComments)==null?void 0:t.isLoading},H=h.lazy(()=>q(()=>import("./CommentForm-Cft5Cj28.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]),import.meta.url)),J={articleDetailsComments:W},g=a=>{const{className:t}=a,{id:e}=w(),{t:r}=B("article-details"),o=b(),j=x(M.selectAll),A=x(G);return h.useEffect(()=>{o(c(e))},[o,e]),e?s.jsx(S,{reducers:J,removeAfterUnmount:!0,children:s.jsxs("div",{className:i(n.ArticleDetailsPage,{},[t]),children:[s.jsx(N,{id:e}),s.jsx(l,{className:n.commentTitle,title:"Комментарии"}),s.jsx(H,{className:n.commentForm}),s.jsx(_,{isLoading:A,comments:j})]})}):s.jsx("div",{className:i(n.ArticleDetailsPage,{},[t]),children:r("Статья не найдена")})},xe=h.memo(g);g.__docgenInfo={description:"",methods:[],displayName:"ArticleDetailsPage",props:{className:{required:!1,tsType:{name:"string"},description:""}}};export{xe as default};
