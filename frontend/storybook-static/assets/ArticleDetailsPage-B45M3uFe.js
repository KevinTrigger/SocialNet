const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CommentForm-Ckzg3K81.js","./jsx-runtime-Cw0GR0a5.js","./index-CTjT7uj6.js","./classNames-DgDD4s-s.js","./Input-BnN8jSt7.js","./Input-CxcEy6wc.css","./Button-FfmSwvyD.js","./Button-N5bCyqdB.css","./DynamicModuleLoader-BDb88CFe.js","./localStorage-BvkLEUEt.js","./index-vZN_Bsf0.js","./useAppDispatch-Bt7wXbJ2.js","./addCommentFormSlice-BakuJiWW.js","./CommentForm-BTdIF2D1.css"])))=>i.map(i=>d[i]);
import{j as t}from"./jsx-runtime-Cw0GR0a5.js";import{c as u}from"./classNames-DgDD4s-s.js";import{r as n}from"./index-CTjT7uj6.js";import{T as _}from"./Text-a7QVxXHR.js";import{C}from"./CommentList-CxvCwG19.js";import{D as x}from"./DynamicModuleLoader-BDb88CFe.js";import{f,g as j,a as P}from"./articleDetailsCommentsSlice-DNLskI9C.js";import{a as T,t as y,d}from"./localStorage-BvkLEUEt.js";import{b as N}from"./useAppDispatch-Bt7wXbJ2.js";import{_ as F}from"./iframe-CRRPQNvt.js";import{g as L,a as E,A as I}from"./ArticleDetails-BAER68Ci.js";import"./ArticleList-CAoFIxqW.js";import"./ArticleViewSelector-NafimWvV.js";import"./userSlice-D9ZQQa6-.js";import{g as v}from"./getUserAuthData-Bm7Ac1PY.js";import{R as k}from"./routeConfig-DLoIAoyA.js";import{B as R}from"./Button-FfmSwvyD.js";import{P as B}from"./Page-DOlsuWKT.js";import{a as b,u as w}from"./index-CVbFUeQw.js";import{u as S}from"./useTranslation-DegO0IwE.js";import"./CommentCard-BZlA-vuP.js";import"./Avatar-BpDMNdIA.js";import"./Skeleton-C9-T3umZ.js";import"./AppLink-BxhvDzQ_.js";import"./index-vZN_Bsf0.js";import"../sb-preview/runtime.js";import"./articleDetailsSlice-CwCYt7Jc.js";import"./TextBlock-rgxTaeNS.js";import"./Icon-DzJ0BDpg.js";import"./Code-De6n1HLF.js";import"./ArticleListItem-XSJToFHR.js";import"./Card-Bd8Xtrjy.js";import"./NotFoundPage-DKH1jNB_.js";const U="_commentTitle_h09ma_1",V="_commentForm_h09ma_5",p={commentTitle:U,commentForm:V},q=s=>{var e;return(e=s.articleDetailsComments)==null?void 0:e.isLoading},z=n.lazy(()=>F(()=>import("./CommentForm-Ckzg3K81.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url)),M=T("articleDetails/addCommentForArticle",async(s,e)=>{const{extra:r,rejectWithValue:l,getState:i,dispatch:m}=e,a=v(i()),o=L(i());if(!a||!s||!o)return l("no data");try{const c=await r.api.post("/comments",{articleId:o==null?void 0:o.id,userId:a==null?void 0:a.id,text:s});if(!c.data)throw new Error;return m(f(o.id)),c.data}catch{return l(y("Ошибка"))}}),O={articleDetailsComments:P},g=s=>{const{className:e}=s,{id:r}=b(),{t:l}=S("article-details"),i=w(),m=N(),a=d(j.selectAll),o=d(q),c=d(E);n.useEffect(()=>{m(f(r))},[m,r]);const A=n.useCallback(D=>{m(M(D))},[m]),h=n.useCallback(()=>{i(k.articles)},[i]);return r?t.jsx(x,{reducers:O,removeAfterUnmount:!0,children:t.jsxs(B,{className:u(p.ArticleDetailsPage,{},[e]),children:[t.jsx(R,{onClick:h,children:"< Все статьи"}),t.jsx(I,{id:r}),!c&&t.jsxs(t.Fragment,{children:[t.jsx(_,{className:p.commentTitle,title:"Комментарии"}),t.jsx(z,{className:p.commentForm,onSendComment:A}),t.jsx(C,{isLoading:o,comments:a})]})]})}):t.jsx("div",{className:u(p.ArticleDetailsPage,{},[e]),children:l("Статья не найдена")})},Pt=n.memo(g);g.__docgenInfo={description:"",methods:[],displayName:"ArticleDetailsPage",props:{className:{required:!1,tsType:{name:"string"},description:""}}};export{Pt as default};
