import{j as o}from"./jsx-runtime-Cw0GR0a5.js";import{r as t}from"./index-CTjT7uj6.js";import{D as S}from"./DynamicModuleLoader-CfHrCiPi.js";import{g as _,p as s,u as B,V as n,f as L,a as v}from"./profileSlice-DFPcaPzE.js";import{P as H}from"./ProfileCard-BXxC4uHV.js";import{b as h}from"./useAppDispatch-CqY9IBVa.js";import{a as l}from"./userSlice-CPoWvKUh.js";import{c as D}from"./classNames-DgDD4s-s.js";import{T as N,a as V}from"./Text-DrY2XunJ.js";import{B as g,a as P}from"./Button-C5Wgu1Fn.js";import{g as M}from"./getUserAuthData-Bm7Ac1PY.js";import{u as T}from"./useTranslation-DegO0IwE.js";import{u as W}from"./index-D51GX6Yn.js";import"./Input-BnN8jSt7.js";import"./Avatar-BpDMNdIA.js";import"./CurrencySelect-k4wBOnKE.js";import"./Select-DNFW2eEI.js";import"./CountrySelect-DfMvu00y.js";import"./Skeleton-C9-T3umZ.js";import"./index-vZN_Bsf0.js";const F=a=>{var e;return(e=a.profile)==null?void 0:e.error},q=a=>{var e;return(e=a.profile)==null?void 0:e.isLoading},x=a=>{var e;return(e=a.profile)==null?void 0:e.readonly},G=a=>{var e;return(e=a.profile)==null?void 0:e.validateError},Y="_ProfilePageHeader_xr9nr_1",$="_editBtn_xr9nr_6",w="_cancelBtn_xr9nr_10",z="_btnsWrapper_xr9nr_14",m={ProfilePageHeader:Y,editBtn:$,cancelBtn:w,btnsWrapper:z},A=a=>{const{className:e}=a,{t:i}=T("profile"),c=h(),u=l(x),p=l(M),f=l(_),d=(p==null?void 0:p.id)===(f==null?void 0:f.id),C=t.useCallback(()=>{c(s.setReadonly(!1))},[c]),E=t.useCallback(()=>{c(s.cancelEdit())},[c]),R=t.useCallback(()=>{c(B())},[c]);return o.jsxs("div",{className:D(m.ProfilePageHeader,{},[e]),children:[o.jsx(N,{title:i("Профиль")}),d&&o.jsx("div",{className:m.btnsWrapper,children:u?o.jsx(g,{onClick:C,theme:P.OUTLINE,className:m.editBtn,children:i("Редактировать")}):o.jsxs("div",{className:m.editModeWrap,children:[o.jsx(g,{onClick:E,theme:P.OUTLINE_RED,className:m.cancelBtn,children:i("Отменить")}),o.jsx(g,{theme:P.OUTLINE,className:m.editBtn,onClick:R,children:i("Сохранить")})]})})]})};A.__docgenInfo={description:"",methods:[],displayName:"ProfilePageHeader",props:{className:{required:!1,tsType:{name:"string"},description:""}}};const J={profile:v},K=()=>{const{t:a}=T("profile"),e=h(),{id:i}=W(),c=l(_),u=l(q),p=l(F),f=l(x),d=l(G),C=t.useCallback(r=>{e(s.updateProfile({firstname:r||""}))},[e]),E=t.useCallback(r=>{e(s.updateProfile({lastname:r||""}))},[e]),R=t.useCallback(r=>{e(s.updateProfile({age:Number(r||0)}))},[e]),b=t.useCallback(r=>{e(s.updateProfile({country:r}))},[e]),y=t.useCallback(r=>{e(s.updateProfile({currency:r}))},[e]),k=t.useCallback(r=>{e(s.updateProfile({city:r}))},[e]),I=t.useCallback(r=>{e(s.updateProfile({avatar:r||""}))},[e]),O=t.useCallback(r=>{e(s.updateProfile({username:r||""}))},[e]),U=()=>{if(d!=null&&d.length)return d.map(r=>o.jsx(N,{theme:V.ERROR,text:j[r]},r))},j={[n.INCORRECT_USER_FIRSTNAME]:a("Неверно указано имя"),[n.INCORRECT_USER_LASTNAME]:a("Неверно указана фамилия"),[n.INCORRECT_USER_USERNAME]:a("Неверно указан никнейм"),[n.INCORRECT_CHARACTERS]:a("Имя и фамилия не могут содержить числа"),[n.INCORRECT_USER_AGE]:a("Неверно указан возраст"),[n.INCORRECT_USER_COUNTRY]:a("Неверно указана страна"),[n.NO_DATA]:a("Данные отсутствуют"),[n.SERVER_ERROR]:a("Ошибка сервера"),[n.INCORRECT_USER_AVATAR]:a("Неверный путь изображения")};return t.useEffect(()=>{i&&e(L(i))},[e,i]),o.jsxs(S,{reducers:J,removeAfterUnmount:!0,children:[o.jsx(A,{}),U(),o.jsx(H,{data:c,isLoading:u,error:p,readonly:f,onChangeFirstname:C,onChangeLastname:E,onChangeAge:R,onChangeCountry:b,onChangeCurrency:y,onChangeCity:k,onChangeAvatar:I,onChangeUsername:O})]})};K.__docgenInfo={description:"",methods:[],displayName:"ProfilePage",props:{className:{required:!1,tsType:{name:"string"},description:""}}};export{K as ProfilePage,K as default};
