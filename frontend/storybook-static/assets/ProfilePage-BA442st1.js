import{j as o}from"./jsx-runtime-CexXSJP5.js";import{r as t}from"./index-BP8_t0zE.js";import{D as S}from"./DynamicModuleLoader-aQDuflIu.js";import{g as _,p as s,u as B,V as n,f as L,a as v}from"./profileSlice-1TfP4bnM.js";import{P as H}from"./ProfileCard-B5KIZYPb.js";import{f as h,e as l}from"./scrollSave-CvpIp14x.js";import{c as D}from"./classNames-DgDD4s-s.js";import{T as N,b as V}from"./Text-BfKY59Gu.js";import{B as P,a as g}from"./Button-DnnjDDNB.js";import"./userSlice-WveEQYTL.js";import{g as M}from"./getUserAuthData-Bm7Ac1PY.js";import{u as T}from"./useTranslation-B2QVmqVC.js";import{P as W}from"./Page-D7cPgsF5.js";import{f as F}from"./index-BhItUGrV.js";import"./localStorage-CnWtazwr.js";import"./Input-SBXS8SFk.js";import"./Avatar-CxpHuU1U.js";import"./CurrencySelect-NgA3ulSF.js";import"./Select-BZBKgAeq.js";import"./CountrySelect-DEfd_jUe.js";import"./Skeleton-CD873yLi.js";import"./index-DJkmxc1E.js";const q=r=>{var e;return(e=r.profile)==null?void 0:e.error},G=r=>{var e;return(e=r.profile)==null?void 0:e.isLoading},x=r=>{var e;return(e=r.profile)==null?void 0:e.readonly},Y=r=>{var e;return(e=r.profile)==null?void 0:e.validateError},$="_ProfilePageHeader_xr9nr_1",w="_editBtn_xr9nr_6",z="_cancelBtn_xr9nr_10",J="_btnsWrapper_xr9nr_14",m={ProfilePageHeader:$,editBtn:w,cancelBtn:z,btnsWrapper:J},A=r=>{const{className:e}=r,{t:i}=T("profile"),c=h(),u=l(x),p=l(M),f=l(_),d=(p==null?void 0:p.id)===(f==null?void 0:f.id),C=t.useCallback(()=>{c(s.setReadonly(!1))},[c]),E=t.useCallback(()=>{c(s.cancelEdit())},[c]),R=t.useCallback(()=>{c(B())},[c]);return o.jsxs("header",{className:D(m.ProfilePageHeader,{},[e]),children:[o.jsx(N,{title:i("Профиль")}),d&&o.jsx("div",{className:m.btnsWrapper,children:u?o.jsx(P,{onClick:C,theme:g.OUTLINE,className:m.editBtn,children:i("Редактировать")}):o.jsxs("div",{className:m.editModeWrap,children:[o.jsx(P,{onClick:E,theme:g.OUTLINE_RED,className:m.cancelBtn,children:i("Отменить")}),o.jsx(P,{theme:g.OUTLINE,className:m.editBtn,onClick:R,children:i("Сохранить")})]})})]})};A.__docgenInfo={description:"",methods:[],displayName:"ProfilePageHeader",props:{className:{required:!1,tsType:{name:"string"},description:""}}};const K={profile:v},Q=()=>{const{t:r}=T("profile"),e=h(),{id:i}=F(),c=l(_),u=l(G),p=l(q),f=l(x),d=l(Y),C=t.useCallback(a=>{e(s.updateProfile({firstname:a||""}))},[e]),E=t.useCallback(a=>{e(s.updateProfile({lastname:a||""}))},[e]),R=t.useCallback(a=>{e(s.updateProfile({age:Number(a||0)}))},[e]),b=t.useCallback(a=>{e(s.updateProfile({country:a}))},[e]),y=t.useCallback(a=>{e(s.updateProfile({currency:a}))},[e]),j=t.useCallback(a=>{e(s.updateProfile({city:a}))},[e]),k=t.useCallback(a=>{e(s.updateProfile({avatar:a||""}))},[e]),I=t.useCallback(a=>{e(s.updateProfile({username:a||""}))},[e]),O=()=>{if(d!=null&&d.length)return d.map(a=>o.jsx(N,{theme:V.ERROR,text:U[a]},a))},U={[n.INCORRECT_USER_FIRSTNAME]:r("Неверно указано имя"),[n.INCORRECT_USER_LASTNAME]:r("Неверно указана фамилия"),[n.INCORRECT_USER_USERNAME]:r("Неверно указан никнейм"),[n.INCORRECT_CHARACTERS]:r("Имя и фамилия не могут содержить числа"),[n.INCORRECT_USER_AGE]:r("Неверно указан возраст"),[n.INCORRECT_USER_COUNTRY]:r("Неверно указана страна"),[n.NO_DATA]:r("Данные отсутствуют"),[n.SERVER_ERROR]:r("Ошибка сервера"),[n.INCORRECT_USER_AVATAR]:r("Неверный путь изображения")};return t.useEffect(()=>{i&&e(L(i))},[e,i]),o.jsx(S,{reducers:K,removeAfterUnmount:!0,children:o.jsxs(W,{children:[o.jsx(A,{}),O(),o.jsx(H,{data:c,isLoading:u,error:p,readonly:f,onChangeFirstname:C,onChangeLastname:E,onChangeAge:R,onChangeCountry:b,onChangeCurrency:y,onChangeCity:j,onChangeAvatar:k,onChangeUsername:I})]})})};Q.__docgenInfo={description:"",methods:[],displayName:"ProfilePage",props:{className:{required:!1,tsType:{name:"string"},description:""}}};export{Q as ProfilePage,Q as default};
