import{j as f}from"./jsx-runtime-CexXSJP5.js";import{r as c}from"./index-BP8_t0zE.js";import{c as d}from"./classNames-DgDD4s-s.js";import{f as h,e as S,g as v,s as P}from"./scrollSave-CvpIp14x.js";import{b as R}from"./index-BhItUGrV.js";const x="_Page_tq39x_1",T="_trigger_tq39x_9",g={Page:x,trigger:T},b=s=>{const{callback:e,triggerRef:r,wrapperRef:t}=s;c.useEffect(()=>{const l=t.current,o=r.current;let n=null;if(e){const a={root:l,rootMargin:"0px",threshold:1};return n=new IntersectionObserver(([i])=>{i.isIntersecting&&e()},a),n.observe(o),()=>{n&&o&&n.unobserve(o)}}},[e,r,t])},E=(s,e)=>{const r=c.useRef(!1);return c.useCallback((...t)=>{r.current||(s(...t),r.current=!0,setTimeout(()=>{r.current=!1},e))},[s,e])},_=s=>{const{className:e,children:r,onScrollEnd:t,isSaveScroll:l=!0}=s,{pathname:o}=R(),n=h(),a=c.useRef(),i=c.useRef(),u=S(p=>v(p,o));b({triggerRef:i,wrapperRef:a,callback:t});const m=E(p=>{n(P.setScrollPosition({path:o,position:p.currentTarget.scrollTop}))},500);return c.useEffect(()=>{a.current.scrollTop=u},[u]),f.jsxs("section",{...l?{onScroll:m}:{},ref:a,className:d(g.Page,{},[e]),children:[r,t?f.jsx("div",{className:g.trigger,ref:i}):null]})};_.__docgenInfo={description:"",methods:[],displayName:"Page",props:{className:{required:!1,tsType:{name:"string"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""},onScrollEnd:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},isSaveScroll:{required:!1,tsType:{name:"boolean"},description:""}}};export{_ as P};
