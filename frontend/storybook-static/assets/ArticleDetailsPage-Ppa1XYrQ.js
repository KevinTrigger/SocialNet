const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CommentForm-u4NwxEaB.js","./jsx-runtime-CexXSJP5.js","./index-BP8_t0zE.js","./classNames-DgDD4s-s.js","./Input-SBXS8SFk.js","./Input-CxcEy6wc.css","./Button-DnnjDDNB.js","./Button-N5bCyqdB.css","./DynamicModuleLoader-BpwFd5Me.js","./scrollSave-pN11k7oX.js","./index-DJkmxc1E.js","./addCommentFormSlice-ClPKOhGC.js","./CommentForm-BTdIF2D1.css"])))=>i.map(i=>d[i]);
import{j as t}from"./jsx-runtime-CexXSJP5.js";import{c as f}from"./classNames-DgDD4s-s.js";import{r as c}from"./index-BP8_t0zE.js";import{T as g,a as j}from"./Text-BfKY59Gu.js";import{C as P}from"./CommentList-B6xYOC3X.js";import{D as C}from"./DynamicModuleLoader-BpwFd5Me.js";import{f as u,g as T,a as N,b as y,c as I}from"./index-CBFNc3Df.js";import{b as E,e as F,d}from"./scrollSave-pN11k7oX.js";import{_ as R}from"./iframe-BSaLmZFk.js";import{g as v,a as k,A as b}from"./ArticleDetails-CNEtLzCU.js";import{A as W}from"./ArticleList-CWghEeDZ.js";import"./ArticleViewSelector-C0AkOxhh.js";import"./ArticleTypeTabs-7M82C3X4.js";import"./userSlice-D_dllhIn.js";import{g as B}from"./getUserAuthData-Bm7Ac1PY.js";import{t as S}from"./localStorage-CnWtazwr.js";import{R as w}from"./routeConfig-CYgeipU-.js";import{B as z}from"./Button-DnnjDDNB.js";import{P as U}from"./Page-Bx5SMrhI.js";import{f as V,a as q}from"./index-g03I8CFB.js";import{u as M}from"./useTranslation-B2QVmqVC.js";import"./CommentCard-BZcCSZFI.js";import"./Avatar-CxpHuU1U.js";import"./Skeleton-CD873yLi.js";import"./AppLink-B-qF6v0a.js";import"./index-CM02_iVE.js";import"./index-DJkmxc1E.js";import"../sb-preview/runtime.js";import"./articleDetailsSlice-Ckq9YvUc.js";import"./TextBlock-D6tYK6NC.js";import"./Icon-BPdxDrsu.js";import"./article-CmWc1HkS.js";import"./Code-bjdoD2wc.js";import"./ArticleListItem-Cn8gv5Iq.js";import"./Card-CIehstmu.js";import"./Select-BAegK4Fl.js";import"./Tabs-D-9Ox_yv.js";import"./NotFoundPage-CcUSRUW2.js";const O="_commentTitle_1hofa_1",$="_commentForm_1hofa_5",G="_recommendWrap_1hofa_9",H="_recommendList_1hofa_13",i={commentTitle:O,commentForm:$,recommendWrap:G,recommendList:H},J=s=>{var e;return((e=s.articleDetailsPage)==null?void 0:e.comments.isLoading)??!1},K=c.lazy(()=>R(()=>import("./CommentForm-u4NwxEaB.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),Q=E("articleDetails/addCommentForArticle",async(s,e)=>{const{extra:o,rejectWithValue:p,getState:n,dispatch:a}=e,r=B(n()),m=v(n());if(!r||!s||!m)return p("no data");try{const l=await o.api.post("/comments",{articleId:m==null?void 0:m.id,userId:r==null?void 0:r.id,text:s});if(!l.data)throw new Error;return a(u(m.id)),l.data}catch{return p(S("Ошибка"))}}),X=s=>{var e,o;return((o=(e=s.articleDetailsPage)==null?void 0:e.recommendations)==null?void 0:o.isLoading)??!1},Y={articleDetailsPage:I},A=s=>{const{className:e}=s,{id:o}=V(),{t:p}=M("article-details"),n=q(),a=F(),r=d(T.selectAll),m=d(J),l=d(k),_=d(N.selectAll),h=d(X);c.useEffect(()=>{a(u(o)),a(y())},[a,o]);const x=c.useCallback(L=>{a(Q(L))},[a]),D=c.useCallback(()=>{n(w.articles)},[n]);return c.useEffect(()=>{console.log(r)},[r]),o?t.jsx(C,{reducers:Y,removeAfterUnmount:!0,children:t.jsxs(U,{className:f(i.ArticleDetailsPage,{},[e]),children:[t.jsx(z,{onClick:D,children:"< Все статьи"}),t.jsx(b,{id:o}),t.jsxs("div",{className:i.recommendWrap,children:[t.jsx(g,{size:j.L,title:"Рекомендуем"}),t.jsx(W,{className:i.recommendList,articles:_,isLoading:h,target:"_blank"})]}),!l&&t.jsxs(t.Fragment,{children:[t.jsx(g,{className:i.commentTitle,title:"Комментарии"}),t.jsx(K,{className:i.commentForm,onSendComment:x}),t.jsx(P,{isLoading:m,comments:r})]})]})}):t.jsx("div",{className:f(i.ArticleDetailsPage,{},[e]),children:p("Статья не найдена")})},St=c.memo(A);A.__docgenInfo={description:"",methods:[],displayName:"ArticleDetailsPage",props:{className:{required:!1,tsType:{name:"string"},description:""}}};export{St as default};
