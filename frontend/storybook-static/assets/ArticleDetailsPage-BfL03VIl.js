const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CommentForm-DL1nhImO.js","./jsx-runtime-Cw0GR0a5.js","./index-CTjT7uj6.js","./classNames-DgDD4s-s.js","./Input-BnN8jSt7.js","./Input-CxcEy6wc.css","./Button-FfmSwvyD.js","./Button-N5bCyqdB.css","./DynamicModuleLoader-DhPMMMm-.js","./i18next-Byb45X2d.js","./index-vZN_Bsf0.js","./useAppDispatch-D8llxUJe.js","./addCommentFormSlice-BKnzknij.js","./CommentForm-BTdIF2D1.css"])))=>i.map(i=>d[i]);
import{j as t}from"./jsx-runtime-Cw0GR0a5.js";import{c as f}from"./classNames-DgDD4s-s.js";import{r as l}from"./index-CTjT7uj6.js";import{T as h}from"./Text-a7QVxXHR.js";import{C as D}from"./CommentList-61WMXbUl.js";import{D as _}from"./DynamicModuleLoader-DhPMMMm-.js";import{f as u,g as x,a as C}from"./articleDetailsCommentsSlice-Bv7nWYkM.js";import{a as j,t as T,d}from"./i18next-Byb45X2d.js";import{b as P}from"./useAppDispatch-D8llxUJe.js";import{_ as y}from"./iframe-C-SdQzMr.js";import{g as L,d as F,b as I}from"./ArticleDetails-DrFKN5p1.js";import"./ArticleList-fXEgB73E.js";import"./userSlice-BdF1H275.js";import{g as N}from"./getUserAuthData-Bm7Ac1PY.js";import{A as E,a as R}from"./AppLink-BxhvDzQ_.js";import{R as v}from"./routeConfig-BZWcKKFi.js";import{a as k}from"./index-CVbFUeQw.js";import{u as b}from"./useTranslation-DegO0IwE.js";import"./CommentCard-nHdDoZF0.js";import"./Avatar-BpDMNdIA.js";import"./Skeleton-C9-T3umZ.js";import"./index-vZN_Bsf0.js";import"../sb-preview/runtime.js";import"./articleDetailsSlice-BdRQEbvr.js";import"./Code-JB95SH0k.js";import"./Button-FfmSwvyD.js";import"./Card-Bd8Xtrjy.js";import"./NotFoundPage-CqPmc_YX.js";const w="_commentTitle_h09ma_1",S="_commentForm_h09ma_5",n={commentTitle:w,commentForm:S},M=r=>{var e;return(e=r.articleDetailsComments)==null?void 0:e.isLoading},U=l.lazy(()=>y(()=>import("./CommentForm-DL1nhImO.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url)),V=j("articleDetails/addCommentForArticle",async(r,e)=>{const{extra:m,rejectWithValue:c,getState:s,dispatch:p}=e,a=N(s()),o=L(s());if(!a||!r||!o)return c("no data");try{const i=await m.api.post("/comments",{articleId:o==null?void 0:o.id,userId:a==null?void 0:a.id,text:r});if(!i.data)throw new Error;return p(u(o.id)),i.data}catch{return c(T("Ошибка"))}}),q={articleDetailsComments:C},A=r=>{const{className:e}=r,{id:m}=k(),{t:c}=b("article-details"),s=P(),p=d(x.selectAll),a=d(M),o=d(F);l.useEffect(()=>{s(u(m))},[s,m]);const i=l.useCallback(g=>{s(V(g))},[s]);return m?t.jsx(_,{reducers:q,removeAfterUnmount:!0,children:t.jsxs("div",{className:f(n.ArticleDetailsPage,{},[e]),children:[t.jsx(E,{to:v.article_details,theme:R.PRIMARY,children:"< Все статьи"}),t.jsx(I,{id:m}),!o&&t.jsxs(t.Fragment,{children:[t.jsx(h,{className:n.commentTitle,title:"Комментарии"}),t.jsx(U,{className:n.commentForm,onSendComment:i}),t.jsx(D,{isLoading:a,comments:p})]})]})}):t.jsx("div",{className:f(n.ArticleDetailsPage,{},[e]),children:c("Статья не найдена")})},At=l.memo(A);A.__docgenInfo={description:"",methods:[],displayName:"ArticleDetailsPage",props:{className:{required:!1,tsType:{name:"string"},description:""}}};export{At as default};
