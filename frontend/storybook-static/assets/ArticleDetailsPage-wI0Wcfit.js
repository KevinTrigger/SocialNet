const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CommentForm-2UbZzcZR.js","./jsx-runtime-CexXSJP5.js","./index-BP8_t0zE.js","./classNames-DgDD4s-s.js","./Input-SBXS8SFk.js","./Input-CxcEy6wc.css","./Button-DnnjDDNB.js","./Button-N5bCyqdB.css","./userSlice-BZds-gGt.js","./scrollSave-_auc3EBr.js","./index-DJkmxc1E.js","./addCommentFormSlice-RBfIJv9X.js","./CommentForm-BTdIF2D1.css"])))=>i.map(i=>d[i]);
import{j as e}from"./jsx-runtime-CexXSJP5.js";import{c as g}from"./classNames-DgDD4s-s.js";import{r as l}from"./index-BP8_t0zE.js";import{T as f,a as T}from"./Text-CChfMvu9.js";import{C as y}from"./CommentList-jnCt4wMb.js";import{t as E,D as I}from"./userSlice-BZds-gGt.js";import{f as h,g as k,a as v,b as B,c as F}from"./index-BECMo3Vg.js";import{b as R,u as n,a as b}from"./scrollSave-_auc3EBr.js";import{_ as H}from"./iframe-CJZUc-9W.js";import{g as D,a as W,A as $}from"./ArticleDetails-gslILsrH.js";import{g as S,R as u,A as w}from"./ArticleList-CKVsddHK.js";import"./ArticleViewSelector-C0AkOxhh.js";import{g as z}from"./getUserAuthData-Bm7Ac1PY.js";import{P as q}from"./Page-BojqNlGd.js";import{B as A}from"./Button-DnnjDDNB.js";import{u as P}from"./useTranslation-B2QVmqVC.js";import{a as U,f as V}from"./index-g03I8CFB.js";import"./CommentCard-BtJBzRtr.js";import"./Avatar-CxpHuU1U.js";import"./Skeleton-CD873yLi.js";import"./AppLink-B-qF6v0a.js";import"./index-CM02_iVE.js";import"./index-DJkmxc1E.js";import"../sb-preview/runtime.js";import"./Icon-BPdxDrsu.js";import"./article-CmWc1HkS.js";import"./Code-bjdoD2wc.js";import"./Card-CIehstmu.js";import"./Select-BAegK4Fl.js";import"./Tabs-D-9Ox_yv.js";import"./NotFoundPage-HmAi8mnh.js";const M="_commentTitle_1hofa_1",O="_commentForm_1hofa_5",G="_recommendWrap_1hofa_9",J="_recommendList_1hofa_13",d={commentTitle:M,commentForm:O,recommendWrap:G,recommendList:J},K=o=>{var s;return((s=o.articleDetailsPage)==null?void 0:s.comments.isLoading)??!1},Q=l.lazy(()=>H(()=>import("./CommentForm-2UbZzcZR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),X=R("articleDetails/addCommentForArticle",async(o,s)=>{const{extra:a,rejectWithValue:r,getState:t,dispatch:m}=s,c=z(t()),i=D(t());if(!c||!o||!i)return r("no data");try{const p=await a.api.post("/comments",{articleId:i==null?void 0:i.id,userId:c==null?void 0:c.id,text:o});if(!p.data)throw new Error;return m(h(i.id)),p.data}catch{return r(E("Ошибка"))}}),Y=o=>{var s,a;return((a=(s=o.articleDetailsPage)==null?void 0:s.recommendations)==null?void 0:a.isLoading)??!1},Z="_ArticleDetailsPageHeader_u7lfc_1",ee="_editBtn_u7lfc_6",_={ArticleDetailsPageHeader:Z,editBtn:ee},x=o=>{const{className:s}=o,{t:a}=P(""),r=U(),t=n(D),m=n(S),c=l.useCallback(()=>{r(u.articles)},[r]),i=l.useCallback(()=>{r(`${u.article_details}${t==null?void 0:t.id}/edit`)},[t==null?void 0:t.id,r]);return e.jsxs("div",{className:g(_.ArticleDetailsPageHeader,{},[s]),children:[e.jsx(A,{onClick:c,children:a("< Все статьи")}),m&&e.jsx(A,{className:_.editBtn,onClick:i,children:a("Редактировать")})]})};x.__docgenInfo={description:"",methods:[],displayName:"ArticleDetailsPageHeader",props:{className:{required:!1,tsType:{name:"string"},description:""}}};const te={articleDetailsPage:F},j=o=>{const{className:s}=o,{id:a}=V(),{t:r}=P("article-details"),t=b(),m=n(k.selectAll),c=n(K),i=n(W),p=n(v.selectAll),L=n(Y);l.useEffect(()=>{t(h(a)),t(B())},[t,a]);const N=l.useCallback(C=>{t(X(C))},[t]);return l.useEffect(()=>{console.log(m)},[m]),a?e.jsx(I,{reducers:te,removeAfterUnmount:!0,children:e.jsxs(q,{className:g(d.ArticleDetailsPage,{},[s]),children:[e.jsx(x,{}),e.jsx($,{id:a}),e.jsxs("div",{className:d.recommendWrap,children:[e.jsx(f,{size:T.L,title:"Рекомендуем"}),e.jsx(w,{className:d.recommendList,articles:p,isLoading:L,target:"_blank"})]}),!i&&e.jsxs(e.Fragment,{children:[e.jsx(f,{className:d.commentTitle,title:"Комментарии"}),e.jsx(Q,{className:d.commentForm,onSendComment:N}),e.jsx(y,{isLoading:c,comments:m})]})]})}):e.jsx("div",{className:g(d.ArticleDetailsPage,{},[s]),children:r("Статья не найдена")})},Fe=l.memo(j);j.__docgenInfo={description:"",methods:[],displayName:"ArticleDetailsPage",props:{className:{required:!1,tsType:{name:"string"},description:""}}};export{Fe as default};
