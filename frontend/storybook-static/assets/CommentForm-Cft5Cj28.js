import{j as a}from"./jsx-runtime-CexXSJP5.js";import{r as p}from"./index-BP8_t0zE.js";import{c as F}from"./classNames-DgDD4s-s.js";import{I as g}from"./Input-SBXS8SFk.js";import{B as T,a as _}from"./Button-CULVALhb.js";import{D as b}from"./DynamicModuleLoader-BE7H7TF8.js";import{a as N,c as j,t as y,b as A}from"./userSlice-BUja-80x.js";import{b as u}from"./useAppDispatch-CHJEm9Vz.js";import{g as I}from"./getUserAuthData-Bm7Ac1PY.js";import{g as S}from"./ArticleDetails-BiOHjb_4.js";import"./index-DJkmxc1E.js";import"./articleDetailsSlice-CiyBvNif.js";import"./Text-7oj-NtWT.js";import"./Skeleton-CD873yLi.js";import"./Avatar-DgOqVGEJ.js";import"./Code-ClL86nT1.js";import"./useTranslation-B2QVmqVC.js";const D="_CommentForm_45qh6_1",k="_btn_45qh6_9",d={CommentForm:D,btn:k},E={text:""},C=N({name:"addCommentForm",initialState:E,reducers:{setText:(o,t)=>{o.text=t.payload}}}),{actions:x}=C,{reducer:q}=C,h=o=>{var t;return(t=o.addCommentForm)==null?void 0:t.text},v=j("addCommentForm/sendComment",async(o,t)=>{const{extra:c,rejectWithValue:e,getState:s}=t,i=u(),m=I(s()),l=h(s()),r=S(s());if(!m||!l||!r)return e("no data");try{const n=await c.api.post("/comments",{articleId:r==null?void 0:r.id,userId:m==null?void 0:m.id,text:l});if(!n.data)throw new Error;return i(x.setText("")),console.log(n.data," data"),n.data}catch{return e(y("Ошибка"))}}),w={addCommentForm:q},f=o=>{const{className:t}=o,c=A(h),e=u(),s=p.useCallback(m=>{e(x.setText(m))},[e]),i=p.useCallback(()=>{e(v())},[e]);return a.jsx(b,{reducers:w,removeAfterUnmount:!0,children:a.jsxs("div",{className:F(d.CommentForm,{},[t]),children:[a.jsx(g,{value:c,onChange:s,className:d.text,placeholder:">"}),a.jsx(T,{onClick:i,className:d.btn,theme:_.OUTLINE,children:"Отправить"})]})})},Y=p.memo(f);f.__docgenInfo={description:"",methods:[],displayName:"CommentForm",props:{className:{required:!1,tsType:{name:"string"},description:""}}};export{Y as default};
