import{j as s}from"./jsx-runtime-CexXSJP5.js";import{r as t}from"./index-BP8_t0zE.js";import{D as U}from"./DynamicModuleLoader-BE7H7TF8.js";import{p as r,u as j,g as B,V as n,f as L,a as v}from"./profileSlice-Byq1TMV_.js";import{P as D}from"./ProfileCard-HYdR2dDN.js";import{b as E}from"./useAppDispatch-CHJEm9Vz.js";import{b as d}from"./userSlice-BUja-80x.js";import{c as H}from"./classNames-DgDD4s-s.js";import{T as P,a as V}from"./Text-7oj-NtWT.js";import{B as C,a as R}from"./Button-CULVALhb.js";import{u as g}from"./useTranslation-B2QVmqVC.js";import{f as M}from"./index-BhItUGrV.js";import"./Input-SBXS8SFk.js";import"./Avatar-DgOqVGEJ.js";import"./CurrencySelect-CKpOPOOK.js";import"./Select-DReADGzP.js";import"./CountrySelect-CY_IAIwX.js";import"./Skeleton-CD873yLi.js";import"./index-DJkmxc1E.js";const F=a=>{var e;return(e=a.profile)==null?void 0:e.error},q=a=>{var e;return(e=a.profile)==null?void 0:e.isLoading},_=a=>{var e;return(e=a.profile)==null?void 0:e.readonly},G=a=>{var e;return(e=a.profile)==null?void 0:e.validateError},W="_ProfilePageHeader_n66ru_1",Y="_editBtn_n66ru_6",$="_cancelBtn_n66ru_10",m={ProfilePageHeader:W,editBtn:Y,cancelBtn:$},h=a=>{const{className:e}=a,{t:i}=g("profile"),l=E(),f=d(_),p=t.useCallback(()=>{l(r.setReadonly(!1))},[l]),u=t.useCallback(()=>{l(r.cancelEdit())},[l]),c=t.useCallback(()=>{l(j())},[l]);return s.jsxs("div",{className:H(m.ProfilePageHeader,{},[e]),children:[s.jsx(P,{title:i("Профиль")}),f?s.jsx(C,{onClick:p,theme:R.OUTLINE,className:m.editBtn,children:i("Редактировать")}):s.jsxs("div",{className:m.editModeWrap,children:[s.jsx(C,{onClick:u,theme:R.OUTLINE_RED,className:m.cancelBtn,children:i("Отменить")}),s.jsx(C,{theme:R.OUTLINE,className:m.editBtn,onClick:c,children:i("Сохранить")})]})]})};h.__docgenInfo={description:"",methods:[],displayName:"ProfilePageHeader",props:{className:{required:!1,tsType:{name:"string"},description:""}}};const w={profile:v},z=()=>{const{t:a}=g("profile"),e=E(),{id:i}=M(),l=d(B),f=d(q),p=d(F),u=d(_),c=d(G),N=t.useCallback(o=>{e(r.updateProfile({firstname:o||""}))},[e]),T=t.useCallback(o=>{e(r.updateProfile({lastname:o||""}))},[e]),x=t.useCallback(o=>{e(r.updateProfile({age:Number(o||0)}))},[e]),A=t.useCallback(o=>{e(r.updateProfile({country:o}))},[e]),y=t.useCallback(o=>{e(r.updateProfile({currency:o}))},[e]),b=t.useCallback(o=>{e(r.updateProfile({city:o}))},[e]),k=t.useCallback(o=>{e(r.updateProfile({avatar:o||""}))},[e]),I=t.useCallback(o=>{e(r.updateProfile({username:o||""}))},[e]),O=()=>{if(c!=null&&c.length)return c.map(o=>s.jsx(P,{theme:V.ERROR,text:S[o]},o))},S={[n.INCORRECT_USER_FIRSTNAME]:a("Неверно указано имя"),[n.INCORRECT_USER_LASTNAME]:a("Неверно указана фамилия"),[n.INCORRECT_USER_USERNAME]:a("Неверно указан никнейм"),[n.INCORRECT_CHARACTERS]:a("Имя и фамилия не могут содержить числа"),[n.INCORRECT_USER_AGE]:a("Неверно указан возраст"),[n.INCORRECT_USER_COUNTRY]:a("Неверно указана страна"),[n.NO_DATA]:a("Данные отсутствуют"),[n.SERVER_ERROR]:a("Ошибка сервера"),[n.INCORRECT_USER_AVATAR]:a("Неверный путь изображения")};return t.useEffect(()=>{i&&e(L(i))},[e,i]),s.jsxs(U,{reducers:w,removeAfterUnmount:!0,children:[s.jsx(h,{}),O(),s.jsx(D,{data:l,isLoading:f,error:p,readonly:u,onChangeFirstname:N,onChangeLastname:T,onChangeAge:x,onChangeCountry:A,onChangeCurrency:y,onChangeCity:b,onChangeAvatar:k,onChangeUsername:I})]})};z.__docgenInfo={description:"",methods:[],displayName:"ProfilePage",props:{className:{required:!1,tsType:{name:"string"},description:""}}};export{z as ProfilePage,z as default};
