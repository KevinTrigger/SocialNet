import{R as s,b as y,c as n,t as u,d as m}from"./i18next-CEY2YAwM.js";import{r as g}from"./index-BP8_t0zE.js";function c(r){r===void 0&&(r=s);var e=r===s?y:function(){return g.useContext(r)};return function(){var o=e(),t=o.store;return t}}var v=c();function h(r){r===void 0&&(r=s);var e=r===s?v:c(r);return function(){var o=e();return o.dispatch}}var C=h();const d=n("profile/fetchProfileData",async(r,e)=>{const{extra:a,rejectWithValue:o}=e;try{return(await a.api.get("/profile")).data}catch{return o(u("Ошибка"))}}),D=r=>{var e;return(e=r.profile)==null?void 0:e.form},i=n("profile/updateProfileData",async(r,e)=>{const{extra:a,rejectWithValue:o,getState:t}=e,f=D(t());try{return(await a.api.put("/profile",f)).data}catch{return o(u("Ошибка"))}}),R={readonly:!0,isLoading:!1,error:void 0,data:void 0,form:void 0},l=m({name:"profile",initialState:R,reducers:{setReadonly:(r,e)=>{r.readonly=e.payload},updateProfile:(r,e)=>{r.form={...r.form,...e.payload}},cancelEdit:r=>{r.readonly=!0,r.form=r.data}},extraReducers:r=>{r.addCase(d.pending,e=>{e.error=void 0,e.isLoading=!0}).addCase(d.fulfilled,(e,a)=>{e.isLoading=!1,e.data=a.payload,e.form=a.payload}).addCase(d.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload}).addCase(i.pending,e=>{e.error=void 0,e.isLoading=!0}).addCase(i.fulfilled,(e,a)=>{e.isLoading=!1,e.data=a.payload,e.form=a.payload,e.readonly=!0}).addCase(i.rejected,(e,a)=>{e.isLoading=!1,e.error=a.payload})}}),{actions:L}=l,{reducer:P}=l,j=()=>C();export{v as a,j as b,i as c,P as d,d as f,D as g,L as p,C as u};
