const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CommentForm-7QLOkiSN.js","./jsx-runtime-Cw0GR0a5.js","./index-CTjT7uj6.js","./classNames-DgDD4s-s.js","./Input-BnN8jSt7.js","./Input-CxcEy6wc.css","./Button-C5Wgu1Fn.js","./Button-NCujQp3l.css","./DynamicModuleLoader-CfHrCiPi.js","./userSlice-CPoWvKUh.js","./index-vZN_Bsf0.js","./useAppDispatch-CqY9IBVa.js","./addCommentFormSlice-CB0xTLd2.js","./CommentForm-BTdIF2D1.css"])))=>i.map(i=>d[i]);
import{j as o}from"./jsx-runtime-Cw0GR0a5.js";import{c as d}from"./classNames-DgDD4s-s.js";import{r as l}from"./index-CTjT7uj6.js";import{T as A}from"./Text-DrY2XunJ.js";import{C as D}from"./CommentList-H1zHiJ6o.js";import{D as _}from"./DynamicModuleLoader-CfHrCiPi.js";import{f,g as h,a as C}from"./articleDetailsCommentsSlice-Bgqwz6Hz.js";import{b as x,t as j,a as u}from"./userSlice-CPoWvKUh.js";import{b as T}from"./useAppDispatch-CqY9IBVa.js";import{_ as y}from"./iframe-Cd6qxbzf.js";import{g as N,b as P}from"./ArticleDetails-DnVJ0sSM.js";import{g as F}from"./getUserAuthData-Bm7Ac1PY.js";import{u as I}from"./index-D51GX6Yn.js";import{u as L}from"./useTranslation-DegO0IwE.js";import"./CommentCard-C06dcTSH.js";import"./Avatar-BpDMNdIA.js";import"./Skeleton-C9-T3umZ.js";import"./AppLink-4CbHQjJ9.js";import"./routeConfig-DF_Wj0E_.js";import"./NotFoundPage-CqPmc_YX.js";import"./index-vZN_Bsf0.js";import"../sb-preview/runtime.js";import"./Code-BtGwA-B1.js";import"./Button-C5Wgu1Fn.js";const E="_commentTitle_h09ma_1",v="_commentForm_h09ma_5",n={commentTitle:E,commentForm:v},b=r=>{var t;return(t=r.articleDetailsComments)==null?void 0:t.isLoading},w=l.lazy(()=>y(()=>import("./CommentForm-7QLOkiSN.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url)),R=x("articleDetails/addCommentForArticle",async(r,t)=>{const{extra:m,rejectWithValue:c,getState:e,dispatch:p}=t,a=F(e()),s=N(e());if(!a||!r||!s)return c("no data");try{const i=await m.api.post("/comments",{articleId:s==null?void 0:s.id,userId:a==null?void 0:a.id,text:r});if(!i.data)throw new Error;return p(f(s.id)),i.data}catch{return c(j("Ошибка"))}}),S={articleDetailsComments:C},g=r=>{const{className:t}=r,{id:m}=I(),{t:c}=L("article-details"),e=T(),p=u(h.selectAll),a=u(b);l.useEffect(()=>{e(f(m))},[e,m]);const s=l.useCallback(i=>{e(R(i))},[e]);return m?o.jsx(_,{reducers:S,removeAfterUnmount:!0,children:o.jsxs("div",{className:d(n.ArticleDetailsPage,{},[t]),children:[o.jsx(P,{id:m}),o.jsx(A,{className:n.commentTitle,title:"Комментарии"}),o.jsx(w,{className:n.commentForm,onSendComment:s}),o.jsx(D,{isLoading:a,comments:p})]})}):o.jsx("div",{className:d(n.ArticleDetailsPage,{},[t]),children:c("Статья не найдена")})},at=l.memo(g);g.__docgenInfo={description:"",methods:[],displayName:"ArticleDetailsPage",props:{className:{required:!1,tsType:{name:"string"},description:""}}};export{at as default};
